# Kubernetes HA Multi-Master Inventory with Load Balancer
# Generated by Terraform

# Load Balancer for Control Plane HA
[k8s_loadbalancer]
lb-0 ansible_host=192.168.56.12 kubernetes_role=loadbalancer

# Master Nodes (Control Plane)
[k8s_masters]
node-0 ansible_host=192.168.56.10 kubernetes_role=master
node-1 ansible_host=192.168.56.11 kubernetes_role=master

# Worker Nodes
[k8s_workers]
node-3 ansible_host=192.168.56.13 kubernetes_role=worker
node-5 ansible_host=192.168.56.15 kubernetes_role=worker
node-6 ansible_host=192.168.56.16 kubernetes_role=worker
node-7 ansible_host=192.168.56.17 kubernetes_role=worker

# Group Definitions
[k8s_cluster:children]
k8s_masters
k8s_workers

[k8s_primary_master]
node-0 ansible_host=192.168.56.10

[k8s_secondary_masters]
node-1 ansible_host=192.168.56.11

[all_vms:children]
k8s_loadbalancer
k8s_masters
k8s_workers

# Global Variables
[all_vms:vars]
ansible_user=vagrant
ansible_ssh_private_key_file=~/ssh-keys/insecure_private_key
ansible_ssh_common_args='-o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null'
ansible_python_interpreter=/usr/bin/python3

# Kubernetes Configuration
[k8s_cluster:vars]
k8s_cni=calico
k8s_version=1.28.15-1.1
k8s_pod_network_cidr=10.244.0.0/16
k8s_service_cidr=10.96.0.0/12
# IMPORTANT: Points to load balancer, not individual master
control_plane_endpoint=192.168.56.12:6443

# Load Balancer Configuration
[k8s_loadbalancer:vars]
lb_backend_servers=192.168.56.10:6443,192.168.56.11:6443
lb_stats_port=8404
lb_stats_user=admin
lb_stats_password=admin123
