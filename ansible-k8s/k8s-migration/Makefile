.PHONY: help prepare deploy validate clean

help:
	@echo "Kubernetes Migration Makefile"
	@echo ""
	@echo "Available targets:"
	@echo "  prepare   - Prepare all nodes for Kubernetes"
	@echo "  deploy    - Deploy all Kubernetes components"
	@echo "  validate  - Validate cluster health"
	@echo "  clean     - Clean up resources"

prepare:
	@echo "ğŸ”§ Preparing infrastructure..."
	cd ansible && ansible-playbook -i inventory/hosts.ini playbooks/pre-migration-prep.yml

deploy:
	@echo "ğŸš€ Deploying Kubernetes components..."
	cd scripts/deployment && ./deploy-all.sh

validate:
	@echo "ğŸ” Validating cluster..."
	cd scripts/validation && ./validate-cluster.sh

clean:
	@echo "ğŸ§¹ Cleaning up..."
	kubectl delete namespace flask-app monitoring testing --ignore-not-found
